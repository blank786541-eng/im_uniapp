import{d as e,g as a,h as s,j as t,o,a as i,k as n,t as c,l as p,f as l,e as r,O as u}from"./index-CA_4_S1o.js";import{A as m}from"./Avatar.cDMQ39ID.js";import{b as d}from"./uni-app.es.f5Xd5cz1.js";import{A as f}from"./AssetsImage.D01ldk7e.js";import{h as g}from"./permission.DD8MzfWC.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=h(e({__name:"UserCard",props:{account:{default:""},nick:{default:""},title:{default:"头像"},isMe:{type:Boolean,default:!1}},setup(e){const h=e,x=a();let _=()=>{};function j(){h.isMe&&(uni.showLoading(),uni.chooseImage({count:1,sizeType:["compressed"],success:e=>{const a=new FormData;a.append("file",e.tempFiles[0]),a.append("accountId",h.account),uni.uploadFile({url:`${u}im/api/upload`,formData:{accountId:h.account},file:e.tempFiles[0],fileType:"image",name:"file",headers:{"Content-Type":"multipart/form-data"},success:e=>{uni.showToast({title:"修改成功",icon:"success"})},complete:e=>{uni.hideLoading()}})},fail:e=>{console.log("chooseImage",e)},complete:g}))}return d(e=>{let a=e?e.account:"";_=s(()=>{const e={...uni.$UIKitStore.friendStore.friends.get(a)};x.value=e?e.alias:""})}),t(()=>{_()}),(e,a)=>(o(),i("div",{class:"user-wrapper",onClick:j},[n("span",{class:"text"},c(e.title),1),n("div",{class:"container-box"}),n("div",{class:"flex-box flex-y-center"},[h.account?(o(),p(m,{key:0,size:"70",account:h.account,style:{"margin-right":"6px"}},null,8,["account"])):l("",!0),r(f,{path:"/static/right.png",width:"6px",height:"12px"})])]))}}),[["__scopeId","data-v-dbfa98b9"]]);export{x as U};
