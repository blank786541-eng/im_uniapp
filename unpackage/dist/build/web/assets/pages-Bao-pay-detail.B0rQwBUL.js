import{d as e,c as a,D as l,q as t,o as n,l as s,v as o,e as u,C as r,a as c,r as i,F as d,k as p,G as v,H as f,P as m,I as g,t as h,g as y,A as x,p as b,J as w,K as k,L as _,M as C}from"./index-CA_4_S1o.js";import{B as D}from"./bao-header.DXmW7jS-.js";import{F}from"./FormInput.sYKNP4AX.js";import{b as V}from"./uni-app.es.f5Xd5cz1.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{U as B}from"./uni-popup.BNglwmFT.js";import{A as M}from"./AssetsImage.D01ldk7e.js";const S=I(e({__name:"gscosmos-date-select",props:{modelValue:{type:Boolean,default:!1},date:{default:new Date},yearRange:{default:[100,100]},height:{default:"50%"}},emits:["confirm","close","update:modelValue"],setup(e,{emit:y}){const x=e;Date.prototype.format=function(e){var a={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var l in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+l+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[l]:("00"+a[l]).substr((""+a[l]).length)));return e};const b=[1,2,3,4,5,6,7,8,9,10,11,12],w=a(()=>x.date?x.date:new Date),k=l({year:w.value.getFullYear(),month:w.value.getMonth()+1,day:w.value.getDate()}),_=a(()=>[100-((new Date).getFullYear()-k.year),0,k.month-1,0,k.day-1]),C=a(()=>{let e=(new Date).getFullYear(),a=[e];for(let l=1;l<=x.yearRange[0];l++)a.unshift(e-l);for(let l=1;l<=x.yearRange[1];l++)a.push(e+l);return a}),D=a(()=>{let e=[];for(let a=1;a<=new Date(k.year,k.month,0).getDate();a++)e.push(a);return e}),F=e=>{k.year=(new Date).getFullYear()-x.yearRange[1]+e.detail.value[0],k.month=e.detail.value[2]+1,k.day=e.detail.value[4]+1},V=()=>{I("close"),I("update:modelValue",!1)},I=y;return t(()=>{console.log(x)}),(e,a)=>{const l=f,t=m,y=g;return n(),s(l,{class:"mask",style:v({opacity:e.modelValue?1:0,pointerEvents:e.modelValue?"all":"none"})},{default:o(()=>[u(l,{class:"contain",style:v({height:e.height,transform:e.modelValue?"none":"translateY(100%)"})},{default:o(()=>[u(l,{class:"gs-picker"},{default:o(()=>[u(l,{class:"btnTeam"},{default:o(()=>[u(l,{class:"close btn",onClick:V},{default:o(()=>[r("取消")]),_:1}),u(l,{class:"confirm btn",onClick:a[0]||(a[0]=e=>(()=>{let e=new Date(k.year,k.month-1,k.day).format("yyyy-MM-dd");I("confirm",e),I("update:modelValue",!1)})())},{default:o(()=>[r("确定")]),_:1})]),_:1}),u(l,{class:"body"},{default:o(()=>[u(y,{class:"picker-view",value:_.value,onChange:F},{default:o(()=>[u(t,null,{default:o(()=>[(n(!0),c(d,null,i(C.value,(e,a)=>(n(),s(l,{class:"item",key:a},{default:o(()=>[r(h(e),1)]),_:2},1024))),128))]),_:1}),p("span",{class:"text"},"年"),u(t,null,{default:o(()=>[(n(),c(d,null,i(b,(e,a)=>u(l,{class:"item",key:a},{default:o(()=>[r(h(e),1)]),_:2},1024)),64))]),_:1}),p("span",{class:"text"},"月"),u(t,null,{default:o(()=>[(n(!0),c(d,null,i(D.value,(e,a)=>(n(),s(l,{class:"item",key:a},{default:o(()=>[r(h(e),1)]),_:2},1024))),128))]),_:1}),p("span",{class:"text"},"日")]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])}}}),[["__scopeId","data-v-c16fcbd9"]]),R=I(e({__name:"pay-detail",setup(e){const a=y({gender:"M",price:0}),l=k(),t=y(null),s=y({alreadyReceived:0,amountClaimed:0,kycStatus:2}),m=y({birthDate:"",account:"",productId:"",name:"",gender:"M",occupation:"",idCard:"",phone:"",payProductId:"0007"}),g=y(1),I=y(new Date);V(e=>{a.value=e,a.value.gender="M",x({method:"GET",url:"im/api/getUserByAccount?account="+uni.$UIKitStore.userStore.myUserInfo.accountId}).then(e=>{s.value=e}),x({url:"kyc/getByAccount",method:"GET",data:{account:uni.$UIKitStore.userStore.myUserInfo.accountId}}).then(e=>{m.value.name=e.name,m.value.idCard=e.idCard,j.value=E.reg.test(e.idCard),console.log(j.value,"isEdit====")})});const R=y(!1);function U(){console.log(s.value),2==s.value.kycStatus&&b({url:`/pages/Bao/certification?id=${a.value.id}`})}const E={reg:/^[a-zA-Z0-9]{18}$/,message:"请输入18位数字加字母组合",trigger:"blur"},$=[{value:"M",name:"男"},{value:"F",name:"女"}],j=y(!1);function A(e){console.log(e),a.value.gender=e.detail.value,m.value.gender=e.detail.value}function Y(){R.value=!0}function T(){R.value=!1}function K(e){m.value.birthDate=e,I.value=e,T()}function P(){l.refs.popupRef.open("bottom")}function G(){let e=null;m.value.account=uni.$UIKitStore.userStore.myUserInfo.accountId,m.value.productId=a.value.id,m.value.payProductId=0==g.value?"0006":"0007";for(let a in m.value)if(!m.value[a]||0==m.value[a].toString().length){e=a;break}if(e){let a="";switch(e){case"idCard":a="身份证不能为空";break;case"phone":a="手机号不能为空";break;case"birthDate":a="请选择生日";break;case"name":a="请输入名称";break;case"occupation":a="请输入职业"}uni.showToast({title:a,icon:"none"})}else x({url:"userPolicy/purchaseApplication",data:m.value,method:"post"}).then(e=>{console.log(e,"res======"),null==e?uni.showToast({title:e,icon:"none",duration:1e3,success:()=>{uni.switchTab({url:"/pages/Bao/index"})}}):b({url:`/pages/Other/webview?url=${e}`})})}function q(e){g.value=e}function H(){b({url:`/pages/Other/webview?url=${s.value.customerServiceUrl}`})}return(e,l)=>{const y=_,x=f,b=C,k=w;return n(),c("div",{class:"bao-container"},[u(D,{label:"国保通特权医疗保险I","label-weight":"400"}),p("div",{class:"content"},[p("div",{class:"form-box"},[p("div",{class:"row flex-box flex-space-between flex-y-center"},[p("span",null,"姓名"),u(F,{class:"input",placeholder:"请输入姓名",modelValue:m.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value.name=e),disabled:j.value,"allow-clear":!1},null,8,["modelValue","disabled"])]),p("div",{class:"row flex-box flex-space-between flex-y-center"},[p("span",null,"性别"),u(k,{onChange:A,class:"flex-box"},{default:o(()=>[(n(),c(d,null,i($,(e,l)=>u(b,{class:"flex-box",key:e.value,style:{"margin-right":"10px"}},{default:o(()=>[u(x,null,{default:o(()=>[u(y,{value:e.value,checked:e.value===a.value.gender},null,8,["value","checked"])]),_:2},1024),u(x,null,{default:o(()=>[r(h(e.name),1)]),_:2},1024)]),_:2},1024)),64))]),_:1})]),p("div",{class:"row flex-box flex-space-between flex-y-center",onClick:Y},[p("span",null,"出生日期"),p("span",null,h(m.value.birthDate||"请选择"),1)]),p("div",{class:"row flex-box flex-space-between flex-y-center"},[p("span",null,"工作"),u(F,{class:"input",modelValue:m.value.occupation,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value.occupation=e),placeholder:"请输入工作","allow-clear":!1},null,8,["modelValue"])]),p("div",{class:"row flex-box flex-space-between flex-y-center"},[p("span",null,"身份证"),u(F,{class:"input",modelValue:m.value.idCard,"onUpdate:modelValue":l[2]||(l[2]=e=>m.value.idCard=e),maxlength:"18",disabled:j.value,rule:E,placeholder:"请输入身份证","allow-clear":!1},null,8,["modelValue","disabled"])]),p("div",{class:"row flex-box flex-space-between flex-y-center",style:{border:"none"}},[p("span",null,"手机号"),u(F,{class:"input",modelValue:m.value.phone,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value.phone=e),placeholder:"请输入手机号","allow-clear":!1},null,8,["modelValue"])])]),p("div",{class:"watch-btn",onClick:U},h(2==s.value.kycStatus?"上传证件实名认证":1==s.value.kycStatus?"已认证":"认证中"),1),p("div",{class:"form-text"},[p("div",{style:{"font-weight":"600","margin-bottom":"6px"}},"说明"),p("div",null," 产品购买后个人信息资料将自动提交至承保机构人工审核，请勿提交虚假信息，否则将审核失败，通常24小时内审核完毕，承保机构将为您提供12小时在线咨询客服，如需咨询有关保险问题及相关问题请点击下方在线客服咨询，客服在线时间上午9:00-晚上21:00。 ")]),p("div",{class:"watch-btn",onClick:P},"立即缴费投保"),p("div",{class:"watch-btn",style:{"background-color":"transparent",color:"#DBB077",border:"2px solid #DBB077"},onClick:H},"国保通在线客服 "),p("div",{class:"form-text"},[p("div",{style:{"font-weight":"600","margin-bottom":"6px"}},"理赔流程"),p("div",null," 如何办理理赔，为确保您的权益，在申请理赔之前请仔细阅读以上信息，如不幸发生保险事故，请尽早联系国保通在线客服完成理赔报案。 ")]),p("div",{style:{height:"40px"}})]),u(x,null,{default:o(()=>[u(S,{modelValue:R.value,date:m.value.birthDate,onConfirm:K,onClose:T},null,8,["modelValue","date"])]),_:1}),u(B,{ref_key:"popupRef",ref:t,"background-color":"#ffffff",type:"bottom",borderRadius:"10px 10px 10px 10px","mask-background-color":"rgba(0,0,0,0.4)"},{default:o(()=>[p("div",{style:{padding:"16px"}},[p("div",{class:"flex-center",style:{"margin-bottom":"30px"}},[p("span",{class:"price"},h(a.value.price),1),p("span",{class:"unit"},"元")]),p("div",{class:"flex-box flex-space-between"},[p("div",{class:"pay-item",style:v({backgroundColor:0==g.value?"#FFF7EC":"#F3F3F3",border:0==g.value?"1px solid #DBB077":""}),onClick:l[4]||(l[4]=e=>q(0))},[u(M,{path:"/static/weixin-pay.png",width:"30px",height:"30px",style:{"margin-right":"6px"}}),p("span",null,"微信支付")],4),p("div",{class:"pay-item",style:v({backgroundColor:1==g.value?"#FFF7EC":"#F3F3F3",border:1==g.value?"1px solid #DBB077":""}),onClick:l[5]||(l[5]=e=>q(1))},[u(M,{path:"/static/ali-pay.png",width:"30px",height:"30px",style:{"margin-right":"6px"}}),p("span",null,"支付宝支付")],4)]),p("div",{style:{"margin-top":"8px"}},[p("div",{class:"notice"},[p("span",{style:{color:"#000"}}," 我已认证阅读并确认 "),p("span",null,"《参保须知》"),r(),p("span",null,"《健康状态告知义务》"),r(),p("span",null,"《投保须知提示书》"),p("span",null,"《用户协议》"),p("span",null,"《授权声明》"),p("span",null,"《隐私政策》")])]),p("div",{class:"watch-btn",onClick:G}," 立即支付 ")])]),_:1},512)])}}}),[["__scopeId","data-v-81f73714"]]);export{R as default};
