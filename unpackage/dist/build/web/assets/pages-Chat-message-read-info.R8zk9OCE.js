import{d as e,g as a,q as t,E as l,b as s,h as n,j as o,o as i,a as u,t as r,f as d,k as c,Q as v,e as p,G as m,u as g,i as I,v as _,n as T,V as f,W as C,F as S,r as N}from"./index-CA_4_S1o.js";import{b as k}from"./uni-app.es.f5Xd5cz1.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{I as y}from"./Icon.DO2Wg01x.js";import{A as $}from"./Avatar.cDMQ39ID.js";import{_ as h}from"./Appellation.vue_vue_type_script_setup_true_lang.Bn2FxhVA.js";import{E}from"./Empty.DhhBt1kg.js";const b=x(e({__name:"NetworkAlert",setup(e){const c=a(!0),v=a(s("connectingText"));t(()=>{var e,a,t,n;(null==(a=null==(e=uni.$UIKitStore)?void 0:e.connectStore)?void 0:a.connectStatus)===l.V2NIMConnectStatus.V2NIM_CONNECT_STATUS_CONNECTED?c.value=!0:(null==(n=null==(t=uni.$UIKitStore)?void 0:t.connectStore)?void 0:n.connectStatus)===l.V2NIMConnectStatus.V2NIM_CONNECT_STATUS_DISCONNECTED?(c.value=!1,v.value=s("offlineText")):(c.value=!1,v.value=s("connectingText"))});const p=n(()=>{var e,a,t,n;(null==(a=null==(e=uni.$UIKitStore)?void 0:e.connectStore)?void 0:a.connectStatus)===l.V2NIMConnectStatus.V2NIM_CONNECT_STATUS_CONNECTED?c.value=!0:(null==(n=null==(t=uni.$UIKitStore)?void 0:t.connectStore)?void 0:n.connectStatus)===l.V2NIMConnectStatus.V2NIM_CONNECT_STATUS_DISCONNECTED?(c.value=!1,v.value=s("offlineText")):(c.value=!1,v.value=s("connectingText"))});return o(()=>{p()}),(e,a)=>!c.value&&v.value?(i(),u("div",{key:0,class:"network-alert"},r(v.value),1)):d("",!0)}}),[["__scopeId","data-v-e68359e5"]]),U=x(e({__name:"nav-bar",props:{title:{},subTitle:{default:""},backgroundColor:{default:""},showLeft:{type:Boolean,default:!0}},setup(e){const a=()=>{uni.navigateBack({delta:1})};return(e,t)=>(i(),u("div",null,[c("div",{class:"nav-bar-wrapper",style:m({backgroundColor:e.backgroundColor||"#ffffff",backgroundImage:`url(${e.title})`,height:g(I)?"55px":"40px",alignItems:g(I)?"flex-end":"center"})},[e.showLeft?v(e.$slots,"left",{key:0},void 0,!0):(i(),u("div",{key:1,onClick:a},[p(y,{type:"icon-zuojiantou",size:22})])),c("div",{class:"title-container"},[c("div",{class:"title"},r(e.title),1),e.subTitle?(i(),u("div",{key:0,class:"subTitle"},r(e.subTitle),1)):d("",!0),v(e.$slots,"icon",{},void 0,!0)]),c("div",null,[v(e.$slots,"right",{},void 0,!0)])],4)]))}}),[["__scopeId","data-v-57a2bfff"]]),M=x(e({__name:"message-read-info",setup(e){const t=a(0),l=a(0),n=a([]),o=a([]),d=a("read"),v=a(""),m=()=>{uni.navigateBack({delta:1})};return k(e=>{const a=null==e?void 0:e.messageClientId,s=null==e?void 0:e.conversationId;if(a&&s){v.value=uni.$UIKitNIM.V2NIMConversationIdUtil.parseConversationTargetId(s);const e=uni.$UIKitStore.msgStore.getMsg(s,[a]);e.length&&uni.$UIKitStore.msgStore.getTeamMessageReceiptDetailsActive(Object.assign({},e[0],{senderId:e[0].senderId})).then(e=>{console.log(e,"msg====="),t.value=null==e?void 0:e.readReceipt.readCount,l.value=null==e?void 0:e.readReceipt.unreadCount,n.value=null==e?void 0:e.readAccountList,setTimeout(()=>{o.value=null==e?void 0:e.unreadAccountList})})}}),(e,a)=>(i(),u("div",{class:"msg-page-wrapper"},[c("div",{class:"msg-nav"},[p(U,{title:g(s)("msgReadPageTitleText"),showLeft:!0},{left:_(()=>[c("div",{onClick:m},[p(y,{type:"icon-zuojiantou",size:22})])]),_:1},8,["title"])]),c("div",{class:"msg-alert"},[p(b)]),c("div",{class:"msg-read-header"},[c("div",{class:T(["msg-read-header-item","read"===d.value?"active":""]),onClick:a[0]||(a[0]=e=>d.value="read")},r(`${g(s)("readText")}(${t.value})`),3),c("div",{class:T(["msg-read-header-item","unread"===d.value?"active":""]),onClick:a[1]||(a[1]=e=>d.value="unread")},r(`${g(s)("unreadText")}(${l.value})`),3)]),f(c("div",{class:"list-wrapper"},[n.value.length?(i(!0),u(S,{key:0},N(n.value,e=>(i(),u("div",{class:"list-item",key:e},[c("div",{class:"avatar-wrapper"},[p($,{size:"40",account:e,"goto-user-card":!0,teamId:v.value,"goto-team-card":!1},null,8,["account","teamId"])]),p(h,{account:e,teamId:v.value},null,8,["account","teamId"])]))),128)):(i(),u("div",{key:1},[p(E,{text:g(s)("allUnReadText")},null,8,["text"])]))],512),[[C,"read"===d.value]]),f(c("div",{class:"list-wrapper"},[o.value.length?(i(!0),u(S,{key:0},N(o.value,e=>(i(),u("div",{class:"list-item",key:e},[c("div",{class:"avatar-wrapper"},[p($,{size:"40",account:e,"goto-user-card":!0,teamId:v.value,"goto-team-card":!1},null,8,["account","teamId"])]),p(h,{account:e,teamId:v.value},null,8,["account","teamId"])]))),128)):(i(),u("div",{key:1},[p(E,{text:g(s)("allReadText")},null,8,["text"])]))],512),[[C,"unread"===d.value]])]))}}),[["__scopeId","data-v-84185084"]]);export{M as default};
