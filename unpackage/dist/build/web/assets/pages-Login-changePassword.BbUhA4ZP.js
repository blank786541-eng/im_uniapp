import{d as e,g as a,o as s,a as o,e as l,k as t,u as n,A as r,U as u}from"./index-CA_4_S1o.js";import{i as d,L as i}from"./label-input.93u5bOWo.js";import{D as p}from"./defaultHeader.BLoWIqPs.js";import{_ as c}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./form-input.CNku4d-1.js";import"./AssetsImage.D01ldk7e.js";const w=c(e({__name:"changePassword",setup(e){const c={reg:/^[a-zA-Z0-9]{6,}$/,message:d.accountError,trigger:"blur"};let w=a({oldPassword:"",accountId:"",password:"",password1:""});function v(){""!==w.value.password&&""!==w.value.password1?w.value.oldPassword||""==w.value.oldPassword?w.value.password==w.value.password1?(w.value.account=uni.$UIKitStore.userStore.myUserInfo.accountId,r({url:"im/user/updateUserAccount",method:"POST",data:w.value}).then(e=>{const a=uni.getStorageSync(u);uni.setStorage({key:u,data:Object.assign({},a,{token:w.value.password})}),uni.showToast({icon:"none",title:"更新成功",duration:1e3,success:()=>{uni.navigateBack()}})})):uni.showToast({icon:"none",title:"两次密码不一致"}):uni.showToast({icon:"none",title:"请输入旧密码"}):uni.showToast({icon:"none",title:"请输入密码"})}function g(e,a){w.value[a]=e,console.log(w,"key====")}return(e,a)=>(s(),o("div",null,[l(p,{title:"修改密码"}),t("div",{class:"content"},[l(i,{label:"旧密码",icon:"/static/password.png",value:n(w).oldPassword,placeholder:"请输入旧密码",type:"password",labelKey:"oldPassword",onUpdateModelValue:g,rule:c},null,8,["value"]),l(i,{label:"新密码",icon:"/static/password.png",value:n(w).password,placeholder:"请输入新密码",type:"password",labelKey:"password",onUpdateModelValue:g,rule:c},null,8,["value"]),l(i,{label:"确认新密码",icon:"/static/password.png",value:n(w).password1,placeholder:"确认新密码",type:"password",labelKey:"password1",onUpdateModelValue:g,rule:c},null,8,["value"])]),t("div",{class:"flex-center",onClick:v},[t("div",{class:"flex-center login-btn"}," 修改 ")])]))}}),[["__scopeId","data-v-d1e7720e"]]);export{w as default};
