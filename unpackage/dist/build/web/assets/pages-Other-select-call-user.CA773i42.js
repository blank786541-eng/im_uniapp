import{d as t,g as e,E as o,o as s,a as n,e as a,u as i,aB as r,p as l}from"./index-CA_4_S1o.js";import{b as c,c as u}from"./uni-app.es.f5Xd5cz1.js";import{P as p}from"./PersonSelect.cBJMe6Rx.js";import{N as d}from"./NavBar.B_pGq4kd.js";import{_ as m}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./Avatar.cDMQ39ID.js";import"./Appellation.vue_vue_type_script_setup_true_lang.Bn2FxhVA.js";import"./Empty.DhhBt1kg.js";import"./Icon.DO2Wg01x.js";const I=m(t({__name:"select-call-user",setup(t){const m=e([]);let I="",S="",_=[];const v=t=>{_=t},g=r(()=>{0!=_.length?(_.includes(uni.$UIKitStore.userStore.myUserInfo.accountId)||_.push(uni.$UIKitStore.userStore.myUserInfo.accountId),console.log(_,"selectList===="),uni.setStorageSync("inviteUsers",_),l({url:`/pages/Other/team-video-call?type=2&teamId=${I}&conversationId=${S}`})):uni.showToast({title:"请选择成员",icon:"none"})},400);return c(t=>{var e;I=t?t.teamId:"",S=t?t.conversationId:"";const s=uni.$UIKitStore.teamMemberStore.getTeamMember(I),n=null==(e=uni.$UIKitStore)?void 0:e.subscriptionStore.stateMap;m.value=s.map(t=>{var e;let s=!1;return console.log(n.get(t.accountId),`res===== ${t.accountId}`,uni.$UIKitStore.localOptions.loginStateVisible),s=!(!n.get(t.accountId)||!uni.$UIKitStore.localOptions.loginStateVisible)&&(null==(e=n.get(t.accountId))?void 0:e.statusType)===o.V2NIMUserStatusType.V2NIM_USER_STATUS_TYPE_LOGIN,{accountId:t.accountId,teamId:I,disabled:!s,checked:!1}}).filter(t=>!t.disabled)}),u(()=>{uni.$off(events.FRIEND_SELECT)}),(t,e)=>(s(),n("div",null,[a(d,{title:"邀请语音聊天"}),a(p,{personList:m.value,onCheckboxChange:v,showBtn:!0,onOnBtnClick:i(g)},null,8,["personList","onOnBtnClick"])]))}}),[["__scopeId","data-v-71717175"]]);export{I as default};
