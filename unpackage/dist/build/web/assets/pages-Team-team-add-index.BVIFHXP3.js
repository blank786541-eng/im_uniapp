import{d as e,g as t,_ as n,o,a,e as i,u as s,aB as r,b as c}from"./index-CA_4_S1o.js";import{P as l}from"./PersonSelect.cBJMe6Rx.js";import{N as u}from"./NavBar.B_pGq4kd.js";import{b as m,c as d}from"./uni-app.es.f5Xd5cz1.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./Avatar.cDMQ39ID.js";import"./Appellation.vue_vue_type_script_setup_true_lang.Bn2FxhVA.js";import"./Empty.DhhBt1kg.js";import"./Icon.DO2Wg01x.js";const I=p(e({__name:"index",setup(e){const p=t([]);let I="",_=[];const f=e=>{_=e},S=r(()=>{var e;_.length>200?uni.showToast({title:c("maxSelectedText"),icon:"none"}):0!=_.length?null==(e=uni.$UIKitStore)||e.teamMemberStore.addTeamMemberActive({teamId:I,accounts:_}).then(async()=>{uni.navigateBack({delta:1})}).catch(e=>{if(109306===(e?e.code:""))uni.showToast({title:c("noPermission"),icon:"error"});else uni.showToast({title:c("addTeamMemberFailText"),icon:"none"})}):uni.showToast({title:c("friendSelect"),icon:"none"})},800);return m(e=>{const t=uni.$UIKitStore.uiStore.friends.filter(e=>!uni.$UIKitStore.relationStore.blacklist.includes(e.accountId));I=e?e.teamId:"";const o=uni.$UIKitStore.teamMemberStore.getTeamMember(I).map(e=>e.accountId);p.value=t.map(e=>o.includes(e.accountId)?{accountId:e.accountId,disabled:!0}:{accountId:e.accountId}),uni.$on(n.FRIEND_SELECT,()=>{S()})}),d(()=>{uni.$off(n.FRIEND_SELECT)}),(e,t)=>(o(),a("div",null,[i(u,{title:s(c)("friendSelectText")},null,8,["title"]),i(l,{personList:p.value,onCheckboxChange:f,showBtn:!0,onBtnClick:s(S)},null,8,["personList","onBtnClick"])]))}}),[["__scopeId","data-v-de40fee3"]]);export{I as default};
