import{d as e,g as t,h as a,_ as o,j as r,o as s,a as n,e as i,u as m,aB as l,E as c,b as u}from"./index-CA_4_S1o.js";import{P as M}from"./PersonSelect.cBJMe6Rx.js";import{N as _}from"./NavBar.B_pGq4kd.js";import{b as d,c as p}from"./uni-app.es.f5Xd5cz1.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./Avatar.cDMQ39ID.js";import"./Appellation.vue_vue_type_script_setup_true_lang.Bn2FxhVA.js";import"./Empty.DhhBt1kg.js";import"./Icon.DO2Wg01x.js";const I=E(e({__name:"add-team-manager",setup(e){const E=t([]);let I=[],T="";const R=e=>{I=e},b=l(()=>{I.length?uni.$UIKitStore.teamStore.updateTeamMemberRoleActive({teamId:T,accounts:I,role:c.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER}).then(()=>{uni.showToast({title:u("addTeamManagerSuccessText"),icon:"none"}),uni.navigateBack({delta:1})}).catch(e=>{switch(null==e?void 0:e.code){case 191004:uni.showToast({title:u("userNotInTeam"),icon:"error"});break;case 109432:uni.showToast({title:u("noPermission"),icon:"error"});break;default:uni.showToast({title:u("addTeamManagerFailText"),icon:"error"})}}):uni.showToast({title:u("pleaseSelectMember"),icon:"error"})},800);let h=()=>{};return d(e=>{T=e?e.id:"",h=a(()=>{E.value=uni.$UIKitStore.teamMemberStore.getTeamMember(T).filter(e=>e.accountId!==uni.$UIKitStore.userStore.myUserInfo.accountId).sort((e,t)=>e.joinTime-t.joinTime).map(e=>(e.memberRole===c.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER&&I.push(e.accountId),{accountId:e.accountId,teamId:e.teamId,checked:e.memberRole===c.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER,disabled:e.memberRole===c.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER}))}),uni.$on(o.FRIEND_SELECT,()=>{b()})}),r(()=>{h()}),p(()=>{uni.$off(o.FRIEND_SELECT)}),(e,t)=>(s(),n("div",null,[i(_,{title:m(u)("chooseText")},null,8,["title"]),i(M,{max:10,personList:E.value,onCheckboxChange:R,showBtn:!0,onBtnClick:m(b)},null,8,["personList","onBtnClick"])]))}}),[["__scopeId","data-v-1f311742"]]);export{I as default};
