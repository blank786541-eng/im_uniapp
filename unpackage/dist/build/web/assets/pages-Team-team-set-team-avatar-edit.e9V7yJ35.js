import{d as a,g as e,o as t,a as s,e as o,u as i,k as l,l as n,f as c,V as r,W as d,t as u,b as m,y as v}from"./index-CA_4_S1o.js";import{N as p}from"./NavBar.B_pGq4kd.js";import{b as g}from"./uni-app.es.f5Xd5cz1.js";import{h}from"./permission.DD8MzfWC.js";import{I as b}from"./Icon.DO2Wg01x.js";import{_ as f}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=f(a({__name:"team-avatar-edit",setup(a){const f=e();let y=e(!1);const k=["https://yx-web-nosdn.netease.im/common/2425b4cc058e5788867d63c322feb7ac/groupAvatar1.png","https://yx-web-nosdn.netease.im/common/62c45692c9771ab388d43fea1c9d2758/groupAvatar2.png","https://yx-web-nosdn.netease.im/common/d1ed3c21d3f87a41568d17197760e663/groupAvatar3.png","https://yx-web-nosdn.netease.im/common/e677d8551deb96723af2b40b821c766a/groupAvatar4.png","https://yx-web-nosdn.netease.im/common/fd6c75bb6abca9c810d1292e66d5d87e/groupAvatar5.png"];let T="";const x=()=>{try{uni.chooseImage({count:1,sizeType:["original"],success:function(a){uni.showLoading({title:""}),uni.$UIKitStore.storageStore.uploadFileActive(a.tempFilePaths[0]).then(a=>{f.value=a,uni.hideLoading()}).catch(a=>{uni.hideLoading(),uni.showToast({title:m("FailAvatarText"),icon:"error",duration:1e3})})},fail:function(a){},complete:h})}catch(a){uni.showToast({title:m("FailAvatarText"),icon:"error",duration:1e3})}},I=a=>{f.value=k[a]},F=()=>{uni.$UIKitStore.teamStore.updateTeamActive({teamId:T,info:{avatar:f.value}}).then(()=>{uni.showToast({title:m("updateTeamSuccessText"),icon:"none"}),uni.navigateBack()}).catch(a=>{uni.showToast({title:m("updateTeamFailedText"),icon:"error",duration:1e3})})};return g(a=>{const e=uni.$UIKitStore.userStore.myUserInfo.accountId;T=null==a?void 0:a.id;const t=uni.$UIKitStore.teamStore.teams.get(T),s=null==t?void 0:t.updateInfoMode;f.value=(null==t?void 0:t.avatar)||"";const o=uni.$UIKitStore.teamMemberStore.getTeamMember(T,[e])[0];(0===s&&0!==o.memberRole||1===s)&&(y.value=!0)}),(a,e)=>{const g=v;return t(),s("div",{class:"team-set-container"},[o(p,{title:i(m)("updateAvatarText")},null,8,["title"]),l("div",{class:"team-avatar-container"},[i(y)?(t(),s("div",{key:0,onClick:x,class:"avatar"},[f.value?(t(),n(g,{key:0,"lazy-load":!0,class:"avatar-img",src:f.value,mode:"aspectFill"},null,8,["src"])):c("",!0),l("div",{class:"choose-picture"},[o(b,{size:24,type:"choose-picture"})])])):(t(),s("div",{key:1,class:"avatar"},[f.value?(t(),n(g,{key:0,"lazy-load":!0,class:"avatar-img",src:f.value,mode:"aspectFill"},null,8,["src"])):c("",!0)]))]),r(l("div",{class:"team-avatar-arr-container"},[l("div",{class:"tip"},u(`${i(m)("chooseDefaultImage")}`),1),l("div",{class:"avatar-arr"},[o(g,{"lazy-load":!0,class:"avatar-img",src:k[0],mode:"aspectFill",onClick:e[0]||(e[0]=a=>I(0))},null,8,["src"]),o(g,{"lazy-load":!0,class:"avatar-img",src:k[1],mode:"aspectFill",onClick:e[1]||(e[1]=a=>I(1))},null,8,["src"]),o(g,{"lazy-load":!0,class:"avatar-img",src:k[2],mode:"aspectFill",onClick:e[2]||(e[2]=a=>I(2))},null,8,["src"]),o(g,{"lazy-load":!0,class:"avatar-img",src:k[3],mode:"aspectFill",onClick:e[3]||(e[3]=a=>I(3))},null,8,["src"]),o(g,{"lazy-load":!0,class:"avatar-img",src:k[4],mode:"aspectFill",onClick:e[4]||(e[4]=a=>I(4))},null,8,["src"])])],512),[[d,i(y)]]),r(l("div",{class:"ok-btn",onClick:F},u(i(m)("saveText")),513),[[d,i(y)]])])}}}),[["__scopeId","data-v-a1fd90bb"]]);export{y as default};
