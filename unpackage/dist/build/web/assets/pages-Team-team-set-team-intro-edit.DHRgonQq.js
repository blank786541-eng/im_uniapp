import{d as e,g as t,c as a,o,a as n,e as i,u as s,k as r,t as l,b as u}from"./index-CA_4_S1o.js";import{b as m}from"./uni-app.es.f5Xd5cz1.js";import{F as c}from"./FormInput.sYKNP4AX.js";import{D as d}from"./defaultHeader.BLoWIqPs.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./AssetsImage.D01ldk7e.js";const v=p(e({__name:"team-intro-edit",setup(e){let p=t(!1);const v=t();let g="";const I=a(()=>{var e;return`${v.value?null==(e=v.value)?void 0:e.length:0}/100`}),f=()=>{uni.$UIKitStore.teamStore.updateTeamActive({teamId:g,info:{intro:v.value}}).then(()=>{uni.showToast({title:u("updateTeamSuccessText"),icon:"none"}),uni.navigateBack()}).catch(e=>{if(109432===(null==e?void 0:e.code))uni.showToast({title:u("noPermission"),icon:"error"});else uni.showToast({title:u("updateTeamFailedText"),icon:"error"})})},h=e=>{v.value=e},S=()=>{v.value=""};return m(e=>{g=null==e?void 0:e.id;const t=uni.$UIKitStore.userStore.myUserInfo.accountId,a=uni.$UIKitStore.teamStore.teams.get(g),o=null==a?void 0:a.updateInfoMode;v.value=(null==a?void 0:a.intro)?a.intro.substring(0,100):"";const n=uni.$UIKitStore.teamMemberStore.getTeamMember(g,[t])[0];(0===o&&0!==n.memberRole||1===o)&&(p.value=!0)}),(e,t)=>(o(),n("div",{class:"team-set-container"},[i(d,{title:"修改名称","tap-action":f,"show-action":s(p)},null,8,["show-action"]),s(p)?(o(),n("div",{key:0,class:"group-intro-input-container"},[i(c,{"model-value":v.value,"allow-clear":!0,maxlength:100,onInput:h,onClear:S,type:"textarea",class:"input"},null,8,["model-value"]),r("div",{class:"input-length"},l(I.value),1)])):(o(),n("div",{key:1,class:"group-intro-input-container"},[r("div",{class:"input"},l(v.value),1)]))]))}}),[["__scopeId","data-v-3bb76181"]]);export{v as default};
