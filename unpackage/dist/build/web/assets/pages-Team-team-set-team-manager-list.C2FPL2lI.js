import{d as e,g as a,c as t,h as o,j as s,o as r,a as n,e as i,u as m,k as l,t as c,f as u,F as d,r as v,l as p,p as _,E as I,b as M}from"./index-CA_4_S1o.js";import{A as T}from"./Avatar.cDMQ39ID.js";import{N as f}from"./NavBar.B_pGq4kd.js";import{b}from"./uni-app.es.f5Xd5cz1.js";import{_ as g}from"./Appellation.vue_vue_type_script_setup_true_lang.Bn2FxhVA.js";import{I as x}from"./Icon.DO2Wg01x.js";import{E}from"./Empty.DhhBt1kg.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=j(e({__name:"team-manager-list",setup(e){const j=a([]),h=a();let k="";const R=()=>{_({url:`/pages/Team/team-set/add-team-manager?id=${k}`})},A=t(()=>{const e=uni.$UIKitStore.userStore.myUserInfo;return(h.value?h.value.ownerAccountId:"")===(e?e.accountId:"")});let y=()=>{};return b(e=>{k=e?e.id:"",y=o(()=>{h.value=uni.$UIKitStore.teamStore.teams.get(k),j.value=uni.$UIKitStore.teamMemberStore.getTeamMember(k).filter(e=>e.memberRole===I.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER).sort((e,a)=>e.joinTime-a.joinTime)})}),s(()=>{y()}),(e,a)=>(r(),n("div",null,[i(f,{title:m(M)("teamManager")},null,8,["title"]),A.value?(r(),n("div",{key:0,class:"add-item",onClick:R},[l("span",{class:"add-item-label"},c(m(M)("addMemberText")),1),i(x,{color:"#999",type:"icon-jiantou"})])):u("",!0),j.value.length?(r(),n("div",{key:1},[(r(!0),n(d,null,v(j.value,e=>(r(),n("div",{class:"team-item",key:e.accountId},[l("div",{class:"team-member"},[i(T,{"goto-user-card":!0,account:e.accountId,"team-id":e.teamId,size:"32"},null,8,["account","team-id"]),i(g,{class:"user-name",account:e.accountId,"team-id":e.teamId,"font-size":14},null,8,["account","team-id"])]),A.value?(r(),n("div",{key:0,class:"btn-remove",onClick:()=>{var a;a=e.accountId,uni.showModal({title:M("confirmRemoveText"),content:M("removeManagerExplain"),confirmText:M("removeText"),success:e=>{e.cancel||uni.$UIKitStore.teamStore.updateTeamMemberRoleActive({teamId:k,accounts:[a],role:I.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_NORMAL}).then(()=>{uni.showToast({title:M("removeSuccessText"),icon:"none"})}).catch(e=>{switch(null==e?void 0:e.code){case 191004:uni.showToast({title:M("userNotInTeam"),icon:"error"});break;case 109432:uni.showToast({title:M("noPermission"),icon:"error"});break;default:uni.showToast({title:M("removeFailText"),icon:"error"})}})}})}},c(m(M)("removeText")),9,["onClick"])):u("",!0)]))),128))])):(r(),p(E,{key:2,text:m(M)("noTeamManager")},null,8,["text"]))]))}}),[["__scopeId","data-v-a4308e73"]]);export{h as default};
