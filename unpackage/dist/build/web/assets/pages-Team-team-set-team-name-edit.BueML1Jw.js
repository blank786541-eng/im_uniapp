import{d as e,g as t,c as a,o,a as n,e as s,u as i,k as l,t as u,b as r,X as m}from"./index-CA_4_S1o.js";import{F as c}from"./FormInput.sYKNP4AX.js";import{b as d}from"./uni-app.es.f5Xd5cz1.js";import{D as v}from"./defaultHeader.BLoWIqPs.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./AssetsImage.D01ldk7e.js";const f=p(e({__name:"team-name-edit",setup(e){let p=t(!1);const f=t();let h="";const I=a(()=>{var e;return`${f.value?null==(e=f.value)?void 0:e.length:0}/30`}),T=()=>{f.value?f.value&&uni.$UIKitStore.teamStore.updateTeamActive({teamId:h,info:{name:f.value}}).then(()=>{uni.showToast({title:r("updateTeamSuccessText"),icon:"none"}),uni.navigateBack()}).catch(e=>{if(109432===(null==e?void 0:e.code))uni.showToast({title:r("noPermission"),icon:"error"});else uni.showToast({title:r("updateTeamFailedText"),icon:"error"})}):uni.showToast({title:r("teamTitleConfirmText"),icon:"error"})},g=e=>{f.value=e?e.replace(/\s*/g,""):e};return d(e=>{const t=uni.$UIKitStore.userStore.myUserInfo.accountId;h=null==e?void 0:e.id;const a=uni.$UIKitStore.teamMemberStore.getTeamMember(h,[t])[0],o=uni.$UIKitStore.teamStore.teams.get(h),n=null==o?void 0:o.updateInfoMode;f.value=o?o.name.substring(0,30):"",(0===n&&0!==a.memberRole||1===n)&&(p.value=!0)}),(e,t)=>{const a=m;return o(),n("div",{class:"team-set-container"},[s(v,{title:"修改名称","tap-action":T,"show-action":i(p)},null,8,["show-action"]),i(p)?(o(),n("div",{key:0,class:"team-name-input-container"},[s(c,{"model-value":f.value,"allow-clear":!0,maxlength:30,onInput:g},null,8,["model-value"]),l("div",{class:"input-length"},u(I.value),1)])):(o(),n("div",{key:1,class:"team-name-input-container"},[s(a,{class:"input",value:f.value},null,8,["value"])]))])}}}),[["__scopeId","data-v-971f14e2"]]);export{f as default};
