import{d as e,g as t,h as a,j as o,o as s,a as r,e as m,u as n,k as i,t as c,F as l,r as u,E as M,b as d,f as _,x as I}from"./index-CA_4_S1o.js";import{A as T}from"./Avatar.cDMQ39ID.js";import{_ as E}from"./Appellation.vue_vue_type_script_setup_true_lang.Bn2FxhVA.js";import{N as R}from"./NavBar.B_pGq4kd.js";import{b as p}from"./uni-app.es.f5Xd5cz1.js";import{_ as f}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./Icon.DO2Wg01x.js";const N=f(e({__name:"transform-team",setup(e){const f=t([]);let N="";let b=()=>{};return p(e=>{N=e?e.id:"",b=a(()=>{const e=uni.$UIKitStore.teamMemberStore.getTeamMember(N).filter(e=>e.accountId!==uni.$UIKitStore.userStore.myUserInfo.accountId),t=e.filter(e=>e.memberRole===M.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER).sort((e,t)=>e.joinTime-t.joinTime),a=e.filter(e=>![M.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_OWNER,M.V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER].includes(e.memberRole)).sort((e,t)=>e.joinTime-t.joinTime);f.value=[...t,...a]})}),o(()=>{b()}),(e,t)=>(s(),r("div",null,[m(R,{title:n(d)("transformTeam")},null,8,["title"]),i("div",{class:"subtitle"},c(n(d)("transformTeamText")),1),(s(!0),r(l,null,u(f.value,e=>(s(),r("div",{class:"member-item",key:e.accountId,onClick:t=>(e=>{const t=uni.$UIKitStore.uiStore.getAppellation({account:e.accountId,teamId:e.teamId});uni.showModal({title:d("transformTeam"),content:`${d("transformTeamContent")} ${t} ${d("doubt")}`,success:t=>{t.confirm&&uni.$UIKitStore.teamStore.transferTeamActive({teamId:N,account:e.accountId,leave:!1}).then(()=>{uni.showToast({title:d("transformTeamSuccessText"),icon:"none"}),I({url:`/pages/Team/team-set/index?id=${N}`})}).catch(e=>{109427===(null==e?void 0:e.code)?uni.showToast({title:d("noPermission"),icon:"error"}):uni.showToast({title:d("transformTeamFailedText"),icon:"error"})})}})})(e)},[m(T,{account:e.accountId,teamId:e.teamId,size:"32"},null,8,["account","teamId"]),m(E,{class:"user-name",account:e.accountId,teamId:e.teamId,fontSize:14},null,8,["account","teamId"]),e.memberRole===n(M).V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_OWNER?(s(),r("div",{key:0,class:"user-tag"},c(n(d)("teamOwner")),1)):e.memberRole===n(M).V2NIMTeamMemberRole.V2NIM_TEAM_MEMBER_ROLE_MANAGER?(s(),r("div",{key:1,class:"user-tag"},c(n(d)("manager")),1)):_("",!0)],8,["onClick"]))),128))]))}}),[["__scopeId","data-v-6cc05aa7"]]);export{N as default};
