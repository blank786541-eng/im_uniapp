import{d as e,g as a,h as t,j as l,o as s,a as o,e as i,v as n,k as r,t as u,u as v,V as c,W as m,b as d,X as p}from"./index-CA_4_S1o.js";import{b as f}from"./uni-app.es.f5Xd5cz1.js";import{I as x}from"./Icon.DO2Wg01x.js";import{N as h}from"./NavBar.B_pGq4kd.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=k(e({__name:"index",setup(e){const k=a(),T=a(""),I=a(!1),_=a(),b={name:15,mobile:11,sign:50,email:30};let g=()=>{};f(e=>{k.value=null==e?void 0:e.key,g=t(()=>{var e;if(_.value=uni.$UIKitStore.userStore.myUserInfo,k.value){const a=_.value[k.value];T.value=a,"name"!==k.value||a||(T.value=null==(e=_.value)?void 0:e.accountId)}})});const j=e=>{T.value=e.detail.value},w=()=>{I.value=!0},y=()=>{T.value=""},A=()=>{const e=T.value;"mobile"!=k.value||/^\d+(\.\d+)?$/.test(e)||""===e.trim()?"email"!=k.value||/[a-zA-Z0-9]+([-_.][A-Za-zd]+)*@([a-zA-Z0-9]+[-.])+[A-Za-zd]{2,5}$/.test(e)||""===e.trim()?(T.value=e,k.value&&uni.$UIKitStore.userStore.updateSelfUserProfileActive({..._.value,[k.value]:e}).then(()=>{uni.navigateBack({})}).catch(()=>{uni.showToast({title:d("saveText")+d(k.value||"")+d("failText"),icon:"error"})})):uni.showToast({title:d("emailErrorText"),icon:"error"}):uni.showToast({title:d("telErrorText"),icon:"error"})},S=()=>{uni.navigateBack({delta:1})};return l(()=>{g()}),(e,a)=>{const t=p;return s(),o("div",{class:"wrapper"},[i(h,{title:v(d)(k.value)},{left:n(()=>[r("div",{class:"nav-bar-text",onClick:S},u(v(d)("cancelText")),1)]),_:1},8,["title"]),r("div",{class:"userInfo-item-wrapper"},[i(t,{class:"input","confirm-type":v(d)("okText"),onFocus:w,maxlength:b[k.value],onInput:j,value:T.value},null,8,["confirm-type","maxlength","value"]),r("div",{onClick:y},[c(i(x,{iconClassName:"clear-icon",type:"icon-shandiao"},null,512),[[m,I.value]])])]),r("div",{class:"ok-btn",onClick:A},u(v(d)("okText")),1)])}}}),[["__scopeId","data-v-fb297ada"]]);export{T as default};
