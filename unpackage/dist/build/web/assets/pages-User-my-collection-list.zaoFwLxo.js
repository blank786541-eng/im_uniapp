import{d as e,g as t,o,a as i,e as l,v as a,k as s,t as n,u as c,l as r,F as d,r as m,V as p,W as v,C as u,n as g,H as h,b as x}from"./index-CA_4_S1o.js";import{b as f}from"./uni-app.es.f5Xd5cz1.js";import{E as j}from"./Empty.DhhBt1kg.js";import{N as C}from"./NavBar.B_pGq4kd.js";import k from"./pages-User-my-collection-card.KuMIzsdM.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./Icon.DO2Wg01x.js";import"./message-file.BFObQXzu.js";import"./emoji.SrFHKbUG.js";import"./dayjs.min.CwOgZug2.js";const T=y(e({__name:"collection-list",setup(e){let y=t([]),T=t(!1);f(()=>{uni.$UIKitStore.msgStore.getCollectionListByOptionActive({}).then(e=>{y.value=e})});const _=()=>{let e=y.value.length;const t=y.value[e-1];uni.$UIKitStore.msgStore.getCollectionListByOptionActive({anchorCollection:t,direction:0}).then(e=>{e.length?y.value=y.value.concat(e):T.value=!0})};return(e,t)=>{const f=h;return o(),i("div",{class:g("wrapper "+(0===c(y).length?"bg-white":""))},[l(C,{title:c(x)("collectionText")},{left:a(()=>[s("div",{class:"nav-bar-text",onClick:t[0]||(t[0]=(...t)=>e.back&&e.back(...t))},n(c(x)("collectionText")),1)]),_:1},8,["title"]),s("div",{class:"collection-card-item-wrapper"},[0===c(y).length?(o(),r(j,{key:0,text:c(x)("noCollectionsText")},null,8,["text"])):(o(!0),i(d,{key:1},m(c(y),(e,t)=>{return o(),i("div",{key:e.collectionId},[(o(),r(k,{data:e,index:t,key:e.collectionId,handleRemoveCollection:(l=e,()=>uni.$UIKitStore.msgStore.removeCollectionsActive([l]).then(()=>{const e=y.value,t=e.findIndex(e=>e===l);e.splice(t,1)}).catch(e=>{(null==e?void 0:e.code)&&void 0!==x(`${e.code}`)?uni.showToast({title:x(`${e.code}`),icon:"error",duration:1e3}):uni.showToast({title:x("deleteCollectionFailedText"),icon:"error",duration:1e3})}))},null,8,["data","index","handleRemoveCollection"]))]);var l}),128)),p(s("div",{onClick:_,class:"view-more-text"},n(c(x)("viewMoreText")),513),[[v,0!==c(y).length&&!c(T)]]),p(l(f,{class:"msg-tip"},{default:a(()=>[u(n(c(x)("noMoreText")),1)]),_:1},512),[[v,0!==c(y).length&&c(T)]])])],2)}}}),[["__scopeId","data-v-9f47cd23"]]);export{T as default};
