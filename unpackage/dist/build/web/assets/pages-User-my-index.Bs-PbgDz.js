import{d as e,g as t,h as a,q as s,o as n,a as o,e as l,k as c,t as i,n as u,F as r,r as d,A as p,p as m,G as v,b as f,aT as g}from"./index-CA_4_S1o.js";import{A as x}from"./AssetsImage.D01ldk7e.js";import{D as h}from"./defaultHeader.BLoWIqPs.js";import{A as y}from"./Avatar.cDMQ39ID.js";import{o as b}from"./uni-app.es.f5Xd5cz1.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=I(e({__name:"index",setup(e){const I=["认证中","已认证","立即认证"],w=t(),U=[{name:"我的保单",url:"/pages/Bao/my-order"},{name:"关于国保通",url:"/pages/User/my/about"},{name:"设置",url:"/pages/User/my/my-detail"},{name:"修改密码",url:"/pages/Login/changePassword"}];a(()=>{w.value=uni.$UIKitStore.userStore.myUserInfo,console.log(w.value,"myUserInfo")});const k=t(""),C=t({}),S=t(!1);function A(){const e=uni.$UIKitStore.userStore.myUserInfo;e.accountId&&(p({method:"get",data:{account:e.accountId},url:`MedicalInsuranceAccount/getReceiveStatus?account=${e.accountId}`}).then(e=>{S.value=e}),p({method:"GET",url:"im/api/getUserByAccount?account="+uni.$UIKitStore.userStore.myUserInfo.accountId}).then(e=>{C.value=e}),p({url:"im/api/getUserCodeAndUrl",method:"GET",data:{account:e.accountId}}).then(e=>{k.value=e.code}))}function B(){S.value&&p({method:"get",data:{account:w.value.accountId},url:`MedicalInsuranceAccount/getInsuranceBenefit?account=${w.value.accountId}`}).then(e=>{uni.showToast({title:"领取成功",icon:"none"}),A()})}const $=t(!1);s(()=>{var e;$.value="on"===uni.getStorageSync((null==(e=w.value)?void 0:e.accountId)+"autoAddFriends")}),b(e=>{A(),w.value=uni.$UIKitStore.userStore.myUserInfo});const _=()=>{uni.showModal({title:f("logoutText"),content:f("logoutConfirmText"),showCancel:!0,success:function(e){e.confirm?(console.log("用户点击确定"),g()):e.cancel&&console.log("用户点击取消")}})};function j(){m({url:"/pages/User/my/my-detail"})}function T(){m({url:"/pages/User/my-detail/my-qrcode"})}function K(e){m({url:e})}function z(){m({url:`/pages/Other/webview?url=${C.value.customerServiceUrl}`})}return(e,t)=>(n(),o("div",{class:"user-container"},[l(h,{"show-back":!1,"background-color":"transparent"}),c("div",{class:"flex-box flex-space-between"},[c("div",{class:"flex-box flex-y-center",onClick:j},[l(y,{account:w.value.accountId},null,8,["account"]),c("div",{class:"user-name",style:{"flex-shrink":"0"}},[c("div",null,i(w.value.name||w.value.accountId),1),c("div",{style:{"font-weight":"400","font-size":"12px","margin-top":"4px"}}," 用户号:"+i(w.value.accountId),1)])]),c("div",{class:"flex-center",onClick:T,style:{"justify-content":"flex-end"}},[c("div",{class:"user-name",style:{"font-weight":"400","font-size":"12px","margin-top":"4px"}},"我的邀请码:"+i(k.value),1)])]),c("div",{class:"user-content-box"},[c("div",{class:"sub-title"}," 我的钱包 "),c("div",{class:"sub-text"},i(C.value.balance),1)]),c("div",{class:"user-content-box"},[c("div",{class:"sub-title"}," 我的医疗保险总额 "),c("div",{class:"sub-text"},i(C.value.alreadyReceived),1),c("div",{class:"flex-box flex-space-between",style:{"margin-top":"12px"}},[c("div",null,[c("div",{class:"sub-title"}," 领取医疗保险金 "),c("div",{class:"sub-text"},i(C.value.amountClaimed),1)]),c("div",{class:u(S.value?"watch-btn":"watch-btn-disabled"),onClick:B}," 领取 ",2)]),c("div",{class:"notice"}," 详情：保险激活后需每日签到领取保险金，如意外事故发生以当前保险总额计算赔付金，详情请咨询国保通在线客服。 ")]),c("div",{class:"setting-box"},[c("div",{class:"row",style:{"padding-top":"0"},onClick:t[0]||(t[0]=e=>K("/pages/Bao/certification"))},[l(x,{path:"/static/me.png",width:"20px",height:"20px"},null,8,["path"]),c("span",{style:{"margin-left":"11px"}},"实名认证"),c("div",{style:{flex:"1"}}),c("span",{style:{"font-size":"13px",color:"#999"}},i(I[C.value.kycStatus]),1),l(x,{path:"/static/right-b.png",width:"16px",height:"16px"},null,8,["path"])]),(n(),o(r,null,d(U,(e,t)=>c("div",{onClick:t=>K(e.url),class:"row",style:v({borderBottom:3==t?"none":"",paddingBottom:3==t?"0":"12px"})},[l(x,{path:`/static/Frame-${t}.png`,width:"20px",height:"20px"},null,8,["path"]),c("span",{style:{"margin-left":"11px"}},i(e.name),1),c("div",{style:{flex:"1"}}),l(x,{path:"/static/right-b.png",width:"16px",height:"16px"},null,8,["path"])],12,["onClick"])),64))]),c("div",{class:"kefu",onClick:z}," 国保通在线客服 "),c("div",{class:"team-btn flex-center",onClick:t[1]||(t[1]=e=>K("/pages/Bao/team"))}," 我的保险团队 "),c("div",{class:"team-btn flex-center",onClick:_,style:{"background-color":"#DBB077","margin-top":"12px",color:"#fff"}}," 安全登出 ")]))}}),[["__scopeId","data-v-3fd4ffd1"]]);export{w as default};
