import{aN as t}from"./index-CA_4_S1o.js";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function i(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})}function r(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}"function"==typeof SuppressedError&&SuppressedError;var a=function(t){var e=t.method,n=void 0===e?"POST":e,o=t.url,i=t.data,r=t.headers;return new Promise(function(t,e){uni.request({url:o,method:n,data:i,header:r,success:function(n){var o=n.data;if(200!==o.code)return e(o.msg);t(o)},fail:function(t){e(t)}})})},s=function(){function t(t){var e=t.appKey,n=t.version,o=t.component,i=t.nertcVersion,r=t.imVersion,a=t.os,s=void 0===a?"":a,c=t.framework,l=void 0===c?"":c,u=t.language,p=void 0===u?"":u,f=t.container,d=void 0===f?"":f,h=t.platform,v=void 0===h?"Web":h,y=t.channel,m=void 0===y?"netease":y;this.platform=v,this.appKey=e,this.version=n,this.component=o,this.nertcVersion=i,this.imVersion=r,this.channel=m,this.os=s,this.framework=l,this.language=p,this.container=d}return t.prototype.track=function(t,e){return i(this,void 0,void 0,function(){var n,o,i,s,c,l,u,p,f,d,h,v,y;return r(this,function(r){switch(r.label){case 0:o=(n=this).appKey,i=n.version,s=n.component,c=n.nertcVersion,l=n.imVersion,u=n.platform,p=n.channel,f=n.os,d=n.framework,h=n.language,v=n.container,y=Date.now(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,a({method:"POST",url:"https://statistic.live.126.net/statics/report/xkit/action",data:{appKey:o,version:i,component:s,timeStamp:y,nertcVersion:c,imVersion:l,platform:u,reportType:t,data:e,channel:p,os:f,framework:d,language:h,container:v}})];case 2:case 3:return r.sent(),[3,4];case 4:return[2]}})})},t}();!function(t){function e(e){var n=t.call(this)||this;return n.visibilityState=document.visibilityState,n.entries=[],n._visibilitychange=function(){n.visibilityState=document.visibilityState,n._trigger()},n.intersectionObserver=new IntersectionObserver(n._intersectionObserverHandler.bind(n),e),document.addEventListener("visibilitychange",n._visibilitychange),n}n(e,t),e.prototype.observe=function(t){return this.intersectionObserver.observe(t)},e.prototype.unobserve=function(t){return this.intersectionObserver.unobserve(t)},e.prototype.destroy=function(){this.intersectionObserver.disconnect(),document.removeEventListener("visibilitychange",this._visibilitychange),this.entries=[]},e.prototype._intersectionObserverHandler=function(t){this.entries=t,this._trigger()},e.prototype._trigger=function(){var t=this;this.entries.forEach(function(e){"visible"!==t.visibilityState||e.intersectionRatio<=0?t.emit("visibleChange",{visible:!1,target:e.target}):t.emit("visibleChange",{visible:!0,target:e.target})})}}(t);var c,l,u,p,f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};c=function(t){var e,n;e=f,n=function(){var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],i={},r=null;function a(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(o){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),i=0;i<o.length;i++){var r=o[i];this[r]=i<n?t:this.methodFactory(r,n,this.name)}if(this.log=this.debug,typeof console===e&&n<this.levels.SILENT)return"No console available for logging"}function l(t){return function(){typeof console!==e&&(c.call(this),this[t].apply(this,arguments))}}function u(o,i,r){return function(o){return"debug"===o&&(o="log"),typeof console!==e&&("trace"===o&&n?s:void 0!==console[o]?a(console,o):void 0!==console.log?a(console,"log"):t)}(o)||l.apply(this,arguments)}function p(t,n){var a,s,l,p=this,f="loglevel";function d(){var t;if(typeof window!==e&&f){try{t=window.localStorage[f]}catch(r){}if(typeof t===e)try{var n=window.document.cookie,o=encodeURIComponent(f),i=n.indexOf(o+"=");-1!==i&&(t=/^([^;]+)/.exec(n.slice(i+o.length+1))[1])}catch(r){}return void 0===p.levels[t]&&(t=void 0),t}}function h(t){var e=t;if("string"==typeof e&&void 0!==p.levels[e.toUpperCase()]&&(e=p.levels[e.toUpperCase()]),"number"==typeof e&&e>=0&&e<=p.levels.SILENT)return e;throw new TypeError("log.setLevel() called with invalid level: "+t)}"string"==typeof t?f+=":"+t:"symbol"==typeof t&&(f=void 0),p.name=t,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=n||u,p.getLevel=function(){return null!=l?l:null!=s?s:a},p.setLevel=function(t,n){return l=h(t),!1!==n&&function(t){var n=(o[t]||"silent").toUpperCase();if(typeof window!==e&&f){try{return void(window.localStorage[f]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch(i){}}}(l),c.call(p)},p.setDefaultLevel=function(t){s=h(t),d()||p.setLevel(t,!1)},p.resetLevel=function(){l=null,function(){if(typeof window!==e&&f){try{window.localStorage.removeItem(f)}catch(t){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}(),c.call(p)},p.enableAll=function(t){p.setLevel(p.levels.TRACE,t)},p.disableAll=function(t){p.setLevel(p.levels.SILENT,t)},p.rebuild=function(){if(r!==p&&(a=h(r.getLevel())),c.call(p),r===p)for(var t in i)i[t].rebuild()},a=h(r?r.getLevel():"WARN");var v=d();null!=v&&(l=h(v)),c.call(p)}(r=new p).getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=i[t];return e||(e=i[t]=new p(t,r.methodFactory)),e};var f=typeof window!==e?window.log:void 0;return r.noConflict=function(){return typeof window!==e&&window.log===r&&(window.log=f),r},r.getLoggers=function(){return i},r.default=r,r},t.exports?t.exports=n():e.log=n()},c(l={exports:{}},l.exports),(p=u||(u={}))[p.LOW=0]="LOW",p[p.NORMAL=1]="NORMAL",p[p.HIGH=2]="HIGH";var d=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(function(){function t(t){this.appKey="",this.component="",this.data={},this.framework="",this.version="",this.startTime=0,this.endTime=0,this.duration=0,this.data.startTime=(new Date).getTime(),this.data.timeStamp=this.data.startTime,this.eventId=t.eventId,this.priority=t.priority}return t.prototype.end=function(){this.data.endTime&&this.data.duration||(this.data.endTime=this.data.endTime||(new Date).getTime(),this.data.duration=this.data.duration||this.data.endTime-this.data.startTime)},t.prototype.setAppInfo=function(t){this.appKey=t.appKey,this.component=t.component,this.version=t.version,t.framework&&(this.framework=t.framework)},t.prototype.endWith=function(t){var e=t.code,n=t.msg,o=t.requestId,i=t.serverCost;this.data.code="number"!=typeof e?-2:e,this.data.message=n,this.data.requestId=o,this.data.serverCost=i,this.end()},t.prototype.endWithSuccess=function(t){if(t){var e=t.requestId,n=t.serverCost;this.data.requestId=e,this.data.serverCost=n}this.data.code=0,this.data.message="success",this.end()},t.prototype.endWithFailure=function(t){if(t){var e=t.requestId,n=t.serverCost;this.data.requestId=e,this.data.serverCost=n}this.data.code=-1,this.data.message="failure",this.end()},t.prototype.setParams=function(t){return this.data.params=o({},t),this},t.prototype.addParams=function(t){return this.data.params=o(o({},this.data.params),t),this},t.prototype.setData=function(t){this.data=o(o({},this.data),t)},t.prototype.setUserId=function(t){this.data.userId=t},t}());!function(t){function e(e){var n=t.call(this,e)||this;return n._stepMap=new Map,n}n(e,t),e.prototype.beginStep=function(t){if(this._stepMap.has(t))return this._stepMap[t];var e=new d({eventId:t,priority:this.priority});return e.setData({step:t}),this._stepMap.set(t,e),e},e.prototype.addStep=function(t){this._stepMap.set(t.eventId,t)},e.prototype.removeStep=function(t){this._stepMap.delete(t)},e.prototype.endWith=function(e){t.prototype.endWith.call(this,e),this.end()},e.prototype.endWithSuccess=function(e){t.prototype.endWithSuccess.call(this,e),this.end()},e.prototype.endWithFailure=function(e){t.prototype.endWithFailure.call(this,e),this.end()},e.prototype.end=function(){var e,n,o=[];t.prototype.end.call(this);try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._stepMap.values()),r=i.next();!r.done;r=i.next()){var a=r.value;a.data.index=o.length,o.push(a.data)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}o.length>0&&(this.data.steps=o)}}(d);const h="10.9.41",v=t=>{var e,n;if(null==(n=null==(e=uni.$UIKitNIM)?void 0:e.options)?void 0:n.appkey){new s({appKey:uni.$UIKitNIM.options.appkey,version:"10.4.0",component:t,imVersion:h,platform:"UniApp",os:uni.getSystemInfoSync().platform.toUpperCase(),framework:"UniApp",language:"Vue3",container:uni.getSystemInfoSync().uniPlatform.toUpperCase()}).track("init","")}};export{v as t};
